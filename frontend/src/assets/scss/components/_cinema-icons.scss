// Import des variables globales
@import '../base/variables';

// Variables pour les icônes - Utilisant la palette globale
$icon-colors: (
  1: $color-primary,      // #7BBBFF - Bleu clair principal
  2: $color-accent,       // #B8A9FF - Violet/lavande accent
  3: $color-primary-light, // #A3D1FF - Variante claire du bleu
  4: $color-warning       // #F59E0B - Jaune pour variété
);

$icon-sizes: (
  small: 1.4rem,
  medium: 2rem,
  large: 2.5rem,
  xlarge: 3rem,
  xxlarge: 3.5rem
);

/* Icônes ÉLOIGNÉES avec 150px de padding */
.cinema-icons-conn {
  position: absolute;
  width: calc(100% - 300px);
  height: calc(100% - 300px);
  top: 150px;
  left: 150px;
  z-index: 1;
  pointer-events: none;
}

.cinema-icon-conn {
  position: absolute;
  opacity: 0.5;
  filter: drop-shadow(0 2px 8px rgba($color-primary, 0.3));
  z-index: 1;
  animation: falling-rain-conn 8s linear infinite;
  transition: opacity $transition;
  
  // Effet au survol (si jamais on veut l'ajouter)
  &:hover {
    opacity: 0.7;
  }
}

// Génération automatique des positions et styles des icônes
@for $i from 1 through 30 {
  $color-index: ($i - 1) % 4 + 1;
  $size-index: ($i - 1) % 6 + 1;
  $sizes: (1.8rem, 2.2rem, 2.5rem, 1.5rem, 3rem, 2rem);
  $size: nth($sizes, $size-index);
  
  .cinema-icon-#{$i}-conn {
    $top: random(90) + 5 + 0%;
    $left: random(90) + 5 + 0%;
    $delay: ($i - 1) * 1s;
    $duration: random(4) + 6 + 0s;
    
    top: #{$top};
    left: #{$left};
    animation-delay: #{$delay};
    font-size: $size;
    color: map-get($icon-colors, $color-index);
    animation-duration: #{$duration};
  }
}

/* Animation de chute comme une pluie d'étoiles */
@keyframes falling-rain-conn {
  0% {
    transform: translateY(-100px) rotate(0deg) scale(0.8);
    opacity: 0;
  }
  10% {
    transform: translateY(0) rotate(180deg) scale(1);
    opacity: 0.8;
  }
  20% {
    transform: translateY(20px) rotate(360deg) scale(1);
    opacity: 0.7;
  }
  30% {
    transform: translateY(40px) rotate(540deg) scale(0.95);
    opacity: 0.6;
  }
  40% {
    transform: translateY(60px) rotate(720deg) scale(0.9);
    opacity: 0.5;
  }
  50% {
    transform: translateY(80px) rotate(900deg) scale(0.85);
    opacity: 0.4;
  }
  60% {
    transform: translateY(100px) rotate(1080deg) scale(0.8);
    opacity: 0.3;
  }
  70% {
    transform: translateY(120px) rotate(1260deg) scale(0.75);
    opacity: 0.2;
  }
  80% {
    transform: translateY(140px) rotate(1440deg) scale(0.7);
    opacity: 0.1;
  }
  90% {
    transform: translateY(160px) rotate(1620deg) scale(0.65);
    opacity: 0;
  }
  100% {
    transform: translateY(180px) rotate(1800deg) scale(0.6);
    opacity: 0;
  }
}

/* Animation de rebond pour certaines icônes */
@keyframes falling-bounce-conn {
  0% {
    transform: translateY(-100px) scale(0.8);
    opacity: 0;
  }
  20% {
    transform: translateY(0) scale(1);
    opacity: 0.8;
  }
  40% {
    transform: translateY(-20px) scale(0.95);
    opacity: 0.7;
  }
  60% {
    transform: translateY(0) scale(1);
    opacity: 0.6;
  }
  80% {
    transform: translateY(-10px) scale(0.98);
    opacity: 0.4;
  }
  100% {
    transform: translateY(0) scale(1);
    opacity: 0.3;
  }
}

// Appliquer l'animation de rebond aux icônes impaires
@for $i from 1 through 30 {
  @if $i % 2 == 1 {
    .cinema-icon-#{$i}-conn {
      animation-name: falling-bounce-conn;
    }
  }
}

/* Responsive pour les icônes éloignées */
@include respond-to($breakpoint-xs) {
  .cinema-icons-conn {
    width: calc(100% - 100px);
    height: calc(100% - 100px);
    top: 50px;
    left: 50px;
  }
  
  .cinema-icon-conn {
    font-size: 1.2rem !important;
    opacity: 0.4;
  }
}

/* Design des icônes comme dans la sidebar */
.cinema-icon-design {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  color: $color-white;
  font-size: $font-size-p2;
  transition: $transition;
  flex-shrink: 0;
  background: $color-primary;
  
  &.icon-yellow {
    background: $color-warning;
    color: $color-text-primary;
  }
  
  &.icon-primary {
    background: $color-primary;
    color: $color-white;
  }
  
  &.icon-accent {
    background: $color-accent;
    color: $color-white;
  }
}

/* Variantes de taille pour les icônes design */
.cinema-icon-design {
  &.icon-small {
    width: 16px;
    height: 16px;
    font-size: $font-size-p3;
  }
  
  &.icon-medium {
    width: 20px;
    height: 20px;
    font-size: $font-size-p2;
  }
  
  &.icon-large {
    width: 24px;
    height: 24px;
    font-size: $font-size-p1;
  }
}
 
/* États interactifs */
.cinema-icon-design {
  &:hover {
    transform: scale(1.1);
    box-shadow: 0 2px 8px rgba($color-primary, 0.4);
  }
  
  &:active {
    transform: scale(0.95);
  }
}

/* Animation pour les icônes design */
@keyframes icon-pulse {
  0%, 100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba($color-primary, 0.4);
  }
  50% {
    transform: scale(1.1);
    box-shadow: 0 0 0 4px rgba($color-primary, 0.2);
  }
}

.cinema-icon-design.pulse {
  animation: icon-pulse 2s infinite;
}
