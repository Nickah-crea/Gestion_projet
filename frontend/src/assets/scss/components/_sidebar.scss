@import '../base/variables';

// Gestion du positionnement pour l'écran de travail
.right-sidebar {
  transition: all 0.3s ease;
  z-index: 999;
  
  // Quand SceneTools est ouverte, s'assurer que RightSidebar reste visible
  .scene-tools-sidebar.open.with-right-sidebar ~ & {
    right: 0;
    z-index: 998;
  }
  
  // Sur mobile, cacher RightSidebar quand SceneTools est ouverte
  @media (max-width: 768px) {
    .scene-tools-sidebar.open ~ & {
      display: none;
    }
  }
}

// Adaptation espace pour sidebar droite ouverte
.right-sidebar {
  &.open ~ .ecran-travail-ecran-travail {
    margin-right: 300px !important; // 280px sidebar + 20px espace
    
    @media (max-width: $breakpoint-lg) {
      margin-right: 270px !important; // 250px sidebar + 20px espace
    }
    
    @media (max-width: $breakpoint-md) {
      margin-right: 240px !important; // 220px sidebar + 20px espace
    }
    
    @media (max-width: $breakpoint-sm) {
      margin-right: 0 !important;
    }
  }
}

// Right Sidebar - Comportement intelligent
.right-sidebar {
  position: fixed;
  right: 0;
  top: 60px;
  bottom: 0;
  width: 60px;
  border-left: 1px solid $color-border;
  box-shadow: $shadow-md;
  z-index: $z-index-fixed - 10;
  transition: all $transition-slow ease;
  display: flex;
  flex-direction: column;
  
  &.open {
    width: 210px;
    
    // Quand la sidebar droite est ouverte ET on est en mode scène
    // On montre un indicateur pour basculer vers les outils scène
    .scene-mode-indicator {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: $spacing-sm;
      background: rgba($color-scene, 0.1);
      border: 1px solid rgba($color-scene, 0.3);
      border-radius: $border-radius-xs;
      margin: $spacing-sm;
      cursor: pointer;
      transition: $transition-fast;
      
      &:hover {
        background: rgba($color-scene, 0.2);
        border-color: $color-scene;
      }
      
      .indicator-text {
        @include typography-p4;
        color: $color-scene;
        font-weight: $font-weight-medium;
        display: flex;
        align-items: center;
        gap: $gap-xs;
        
        i {
          color: $color-scene;
        }
      }
      
      .switch-btn {
        background: $color-scene;
        color: $color-text-light;
        border: none;
        border-radius: $border-radius-xs;
        padding: $gap-xs $spacing-sm;
        font-size: $font-size-p5;
        cursor: pointer;
        transition: $transition-fast;
        
        &:hover {
          background: darken($color-scene, 10%);
          transform: translateX(2px);
        }
      }
    }
  }
  
  // Cacher la sidebar droite quand on est en mode scène
  &.hidden-in-scene-mode {
    transform: translateX(100%);
    opacity: 0;
    pointer-events: none;
  }
}

